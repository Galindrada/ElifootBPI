<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match Day - Elifoot Online</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Elifoot Online</h1>
            <nav>
                <a href="/">Match Day</a>
                <a href="/competitions">Competitions</a>
                <a href="/all-teams">All Teams</a>
            </nav>
        </header>

        <div class="main-content">
            <div class="match-view" style="width: 60%;">
                {% if not all_rounds_played and matches %}
                    <div class="match-day-header">
                        <h2>Match Day {{ current_round }}</h2>
                        <div class="match-time">
                            Minute: <span id="minute-clock">0</span>'
                        </div>
                    </div>
                    <div id="fixture-list">
                        {% for match in matches %}
                        <div class="scoreboard">
                            <span>{{ match.home_team.name }}</span>
                            <span id="score-{{ match.id }}">
                                {% if match.played %}{{ match.home_score }} - {{ match.away_score }}{% else %}0 - 0{% endif %}
                            </span>
                            <span>{{ match.away_team.name }}</span>
                        </div>
                        {% endfor %}
                    </div>
                    <button id="start-fixture-btn">Simulate Fixture</button>
                    <a href="{{ url_for('next_fixture') }}" id="next-fixture-btn" class="button-link" style="display: none;">Next Fixture</a>
                {% elif all_rounds_played %}
                     <h2>Season Finished!</h2>
                     <p>All rounds have been played. You can check the final standings in the Competitions tab or reset the database.</p>
                     <a href="/populate-db" class="button-link">Start New Season (Reset DB)</a>
                {% else %}
                    <h2>Welcome!</h2>
                    <p>The database appears to be empty. Please initialize it to start the season.</p>
                     <a href="/populate-db" class="button-link">Initialize Database</a>
                {% endif %}
            </div>
            <div class="log-view" style="width: 40%;">
                <h2>Simulation Log</h2>
                <div id="match-log-box">
                    <ul id="match-log">
                        <!-- Match events will appear here -->
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>

